---

hero_image: /jubilant-bassoon/images/hero.jpg
<!-- hero_height: is-fullwidth -->
hero_darken: true

---

# Troubleshooting

## Procedure 1A: PyCoGAPS

| **Step**              | **Problem**                                                                                                                                                                                                              | **Possible Reason**                                                                                                                                                                                                                                                 | **Solution**                                                                                                                                 |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| 1                     | **Error with cloning repository due to large files (inputdata.h5ad, cogapsresult.h5ad)**                                                                                                                                 | Git LFS (large file storage) is not installed.                                                                                                                                                                                                                      | Run the following command:  brew install git-lfs                                                                                             |
| 2                     | **No module named pybind11**                                                                                                                                                                                             | pybind11 was not successfully installed                                                                                                                                                                                                                             | If using conda, run: conda install -c conda-forge pybind11 Otherwise, run: pip install pybind11                                              |
| 2                     | **src/bindings.cpp:1:10: fatal error: 'CoGAPS/src/GapsRunner.h' file not found** #include "CoGAPS/src/GapsRunner.h"          ^~~~~~~~~~~~~~~~~~~~~~~~~ 1 error generated. error: command 'gcc' failed with exit status 1 | CoGAPS library was not downloaded                                                                                                                                                                                                                                   | Make sure you use --recursive flag when installing pycogaps.  git clone https://github.com/FertigLab/pycogaps.git --recursive                |
| 11                    | Runtime is prohibitively long, given reasonable scales of data (typical timing is as given in n*log(n)).                                                                                                                 | If run times are prohibitive within reasonable scales of data, this may result from algorithm overfitting zeros.                                                                                                                                                    | We recommend filtering the data only to genes that are reasonably expressed or filtering to a limited subset of genes (e.g., high variance). |
| nIterations           | Number of iterations of each phase of the algorithm.                                                                                                                                                                     | Higher iterations (ie. 50,000 iterations) is recommended as it will lead to better convergence. However, higher iterations greatly increases runtime, so we invite the user to play around with values to observe the tradeoff and determine the appropriate value. |                                                                                                                                              |
| useSparseOptimization | Speeds up performance with sparse data.                                                                                                                                                                                  | Set to true if using sparse data, ie. if roughly >80% of data is zero.                                                                                                                                                                                              |                                                                                                                                              |
|                       |                                                                                                   **_Run Parameters_**                                                                                                   |                                                                                                                                                                                                                                                                     |                                                                                                                                              |
| nThreads              | Maximum number of threads to run on.  Allows the underlying algorithm to run on multiple threads and has no effect on the mathematics of the algorithm.                                                                  | The precise number of threads to use depends on many factors such as hardware and data size. The best approach is to play around with different values and see how it affects the estimated time.                                                                   |                                                                                                                                              |
| transposeData         | Whether to transpose data.                                                                                                                                                                                               | Set to true if data is stored as samples x genes format (CoGAPS defaults to genes x samples format).                                                                                                                                                                |                                                                                                                                              |
|                       |                                                                                               **_Distributed Parameters_**                                                                                               |                                                                                                                                                                                                                                                                     |                                                                                                                                              |
| distributed           | Whether to run distributed.                                                                                                                                                                                              | Recommended in most cases. Set to “genome-wide” for parallelization across genes, or “single-cell” for parallelization across cells.                                                                                                                                |                                                                                                                                              |
| nSets                 | Number of sets to break data into.                                                                                                                                                                                       | For distributed with “genome-wide”, do not set value to below 2,000 genes per set. For distributed with “single-cell”, make sure this value captures sufficient representation of all cell types in the data.                                                       |                                                                                                                                              |
| minNS                 | Minimum number of individual set contributions a cluster must contain.                                                                                                                                                   | Be cautious in setting this value too high as increasing robustness may also cause misses in rare phenomenon or cells.                                                                                                                                              |                                                                                                                                              |
| maxNS                 | Maximum number of individual set contributions a cluster can contain.                                                                                                                                                    | Modifying this parameter is only important for highly correlated processes.                                                                                                                                                                                         |                                                                                                                                              |
